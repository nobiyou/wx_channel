# æ—¥å¿—å·¥å…·ä½¿ç”¨è¯´æ˜Ž

## ðŸ“Š æ—¥å¿—åˆ†æžå·¥å…·

ç”Ÿæˆå®Œæ•´çš„æ—¥å¿—ç»Ÿè®¡æŠ¥å‘Šï¼ŒåŒ…æ‹¬ç³»ç»Ÿäº‹ä»¶ã€é¡µé¢è®¿é—®ã€ä¸‹è½½ç»Ÿè®¡ã€æ•°æ®é‡‡é›†ç­‰ã€‚

### ä½¿ç”¨æ–¹æ³•

```powershell
.\scripts\analyze_logs.ps1
```

### è¾“å‡ºå†…å®¹

- ðŸ“Š åŸºæœ¬ç»Ÿè®¡ï¼šæ€»æ—¥å¿—æ¡æ•°
- ðŸ–¥ï¸ ç³»ç»Ÿäº‹ä»¶ï¼šå¯åŠ¨/å…³é—­æ¬¡æ•°
- ðŸ“„ é¡µé¢è®¿é—®ï¼šå„é¡µé¢è®¿é—®ç»Ÿè®¡
- â¬‡ï¸ ä¸‹è½½ç»Ÿè®¡ï¼šè§†é¢‘/å°é¢/æ ¼å¼ä¸‹è½½æ¬¡æ•°
- ðŸ“ æ•°æ®é‡‡é›†ï¼šè¯„è®ºé‡‡é›†ã€CSVæ“ä½œç»Ÿè®¡
- âŒ é”™è¯¯ç»Ÿè®¡ï¼šé”™è¯¯å’Œå¤±è´¥æ¬¡æ•°
- ðŸ• æœ€è¿‘æ´»åŠ¨ï¼šæœ€åŽ10æ¡æ—¥å¿—

---

## ðŸ” æ—¥å¿—æŸ¥çœ‹å·¥å…·

å¤šåŠŸèƒ½æ—¥å¿—æŸ¥çœ‹å·¥å…·ï¼Œæ”¯æŒå®žæ—¶ç›‘æŽ§ã€æœç´¢ã€ç»Ÿè®¡ç­‰ã€‚

### 1. å®žæ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆæŽ¨èï¼‰

å®žæ—¶ç›‘æŽ§æœ€æ–°çš„æ—¥å¿—è¾“å‡ºï¼Œé€‚åˆè°ƒè¯•å’Œç›‘æŽ§ã€‚

```powershell
.\scripts\view_logs.ps1 -Action tail
```

å¯ä»¥æŒ‡å®šæ˜¾ç¤ºè¡Œæ•°ï¼š

```powershell
.\scripts\view_logs.ps1 -Action tail -Lines 100
```

### 2. æœç´¢æ—¥å¿—

æœç´¢åŒ…å«ç‰¹å®šå…³é”®è¯çš„æ—¥å¿—ã€‚

```powershell
# æœç´¢ä¸‹è½½ç›¸å…³æ—¥å¿—
.\scripts\view_logs.ps1 -Action search -Pattern "ä¸‹è½½"

# æœç´¢ç‰¹å®šè§†é¢‘ID
.\scripts\view_logs.ps1 -Action search -Pattern "14262937779215141227"

# æœç´¢è¯„è®ºé‡‡é›†
.\scripts\view_logs.ps1 -Action search -Pattern "è¯„è®º"

# æœç´¢æ‰¹é‡ä¸‹è½½
.\scripts\view_logs.ps1 -Action search -Pattern "æ‰¹é‡ä¸‹è½½"
```

### 3. å¿«é€Ÿç»Ÿè®¡

å¿«é€ŸæŸ¥çœ‹å…³é”®æŒ‡æ ‡ç»Ÿè®¡ã€‚

```powershell
.\scripts\view_logs.ps1 -Action stats
```

### 4. æŸ¥çœ‹é”™è¯¯

åªæ˜¾ç¤ºé”™è¯¯å’Œå¤±è´¥çš„æ—¥å¿—ã€‚

```powershell
.\scripts\view_logs.ps1 -Action errors
```

---

## ðŸ§¹ æ—¥å¿—æ¸…ç†å·¥å…·

ç®¡ç†å’Œæ¸…ç†æ—¥å¿—æ–‡ä»¶ï¼Œæ”¯æŒå¤‡ä»½ã€æ¸…ç†å’Œå½’æ¡£ã€‚

### 1. æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯

æŸ¥çœ‹å½“å‰æ—¥å¿—æ–‡ä»¶çš„æ•°é‡ã€å¤§å°å’Œè¯¦ç»†ä¿¡æ¯ã€‚

```powershell
.\scripts\clean_logs.ps1 -Action info
```

### 2. å¤‡ä»½æ—¥å¿—

å°†æ‰€æœ‰æ—¥å¿—æ–‡ä»¶åŽ‹ç¼©å¤‡ä»½åˆ° `logs\backup` ç›®å½•ã€‚

```powershell
.\scripts\clean_logs.ps1 -Action backup
```

### 3. æ¸…ç†æ—§æ—¥å¿—

åˆ é™¤æŒ‡å®šå¤©æ•°ä¹‹å‰çš„æ—¥å¿—æ–‡ä»¶ï¼ˆé»˜è®¤ä¿ç•™7å¤©ï¼‰ã€‚

```powershell
# æ¸…ç†7å¤©å‰çš„æ—¥å¿—
.\scripts\clean_logs.ps1 -Action clean -KeepDays 7

# æ¸…ç†30å¤©å‰çš„æ—¥å¿—
.\scripts\clean_logs.ps1 -Action clean -KeepDays 30
```

### 4. å½’æ¡£æ—¥å¿—

å…ˆå¤‡ä»½æ‰€æœ‰æ—¥å¿—ï¼Œç„¶åŽæ¸…ç†æ—§æ—¥å¿—ï¼ˆæŽ¨èï¼‰ã€‚

```powershell
# å½’æ¡£å¹¶ä¿ç•™æœ€è¿‘7å¤©
.\scripts\clean_logs.ps1 -Action archive -KeepDays 7

# å½’æ¡£å¹¶ä¿ç•™æœ€è¿‘30å¤©
.\scripts\clean_logs.ps1 -Action archive -KeepDays 30
```

---

## ðŸ’¡ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šè°ƒè¯•æ–°åŠŸèƒ½

å¯åŠ¨ç¨‹åºåŽï¼Œåœ¨å¦ä¸€ä¸ªç»ˆç«¯å®žæ—¶æŸ¥çœ‹æ—¥å¿—ï¼š

```powershell
.\scripts\view_logs.ps1 -Action tail
```

### åœºæ™¯2ï¼šæ£€æŸ¥ä¸‹è½½è®°å½•

æŸ¥çœ‹ä»Šå¤©ä¸‹è½½äº†å“ªäº›è§†é¢‘ï¼š

```powershell
.\scripts\view_logs.ps1 -Action search -Pattern "ä¸‹è½½è®°å½•"
```

### åœºæ™¯3ï¼šæŽ’æŸ¥é—®é¢˜

æŸ¥çœ‹æ˜¯å¦æœ‰é”™è¯¯å‘ç”Ÿï¼š

```powershell
.\scripts\view_logs.ps1 -Action errors
```

### åœºæ™¯4ï¼šç”ŸæˆæŠ¥å‘Š

ç”Ÿæˆå®Œæ•´çš„ä½¿ç”¨ç»Ÿè®¡æŠ¥å‘Šï¼š

```powershell
.\scripts\analyze_logs.ps1
```

---

## ðŸ“ æ—¥å¿—æ ¼å¼è¯´æ˜Ž

æ—¥å¿—æ ¼å¼ï¼š`[æ—¶é—´] çº§åˆ« [æ“ä½œç±»åž‹] è¯¦ç»†ä¿¡æ¯`

### å¸¸è§æ“ä½œç±»åž‹

- `[ç³»ç»Ÿå¯åŠ¨]` - æœåŠ¡å¯åŠ¨
- `[ç³»ç»Ÿå…³é—­]` - æœåŠ¡å…³é—­
- `[é¡µé¢åŠ è½½]` - é¡µé¢è®¿é—®
- `[è§†é¢‘ä¿¡æ¯]` - è§†é¢‘ä¿¡æ¯èŽ·å–
- `[ä¸‹è½½è®°å½•]` - è§†é¢‘ä¸‹è½½
- `[ä¸‹è½½å°é¢]` - å°é¢ä¸‹è½½
- `[æ ¼å¼ä¸‹è½½]` - ç‰¹å®šæ ¼å¼ä¸‹è½½
- `[è¯„è®ºé‡‡é›†]` - è¯„è®ºæ•°æ®é‡‡é›†
- `[è¯„è®ºä¿å­˜]` - è¯„è®ºæ•°æ®ä¿å­˜
- `[CSVæ“ä½œ]` - CSVæ–‡ä»¶æ“ä½œ
- `[é¡µé¢å¿«ç…§]` - é¡µé¢å¿«ç…§ä¿å­˜
- `[Profileè§†é¢‘é‡‡é›†]` - Profileé¡µè§†é¢‘åˆ—è¡¨é‡‡é›†
- `[Profileæ‰¹é‡ä¸‹è½½]` - æ‰¹é‡ä¸‹è½½æ“ä½œ
- `[æœç´¢é¡µé¢]` - æœç´¢é¡µé¢åŠ è½½
- `[æœç´¢å…³é”®è¯]` - æœç´¢å…³é”®è¯è®°å½•
- `[å¯¼å‡ºåŠ¨æ€]` - å¯¼å‡ºåŠŸèƒ½

### æ—¥å¿—çº§åˆ«

- `INFO` - æ­£å¸¸ä¿¡æ¯
- `WARN` - è­¦å‘Šä¿¡æ¯
- `ERROR` - é”™è¯¯ä¿¡æ¯
- `DEBUG` - è°ƒè¯•ä¿¡æ¯ï¼ˆé»˜è®¤ä¸æ˜¾ç¤ºï¼‰

---

## ðŸ”§ é«˜çº§ç”¨æ³•

### ä½¿ç”¨PowerShellåŽŸç”Ÿå‘½ä»¤

```powershell
# æŸ¥çœ‹æœ€åŽ50è¡Œ
Get-Content logs\wx_channel.log -Tail 50

# å®žæ—¶ç›‘æŽ§
Get-Content logs\wx_channel.log -Wait -Tail 50

# æœç´¢ç‰¹å®šå†…å®¹
Select-String -Path "logs\wx_channel.log" -Pattern "ä¸‹è½½"

# ç»Ÿè®¡ä¸‹è½½æ¬¡æ•°
(Select-String -Path "logs\wx_channel.log" -Pattern "ä¸‹è½½è®°å½•").Count

# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
Select-String -Path "logs\wx_channel.log" -Pattern "2025-11-23"

# å¯¼å‡ºæœç´¢ç»“æžœåˆ°æ–‡ä»¶
Select-String -Path "logs\wx_channel.log" -Pattern "ä¸‹è½½" | Out-File "download_logs.txt"
```

### æ—¥å¿—æ–‡ä»¶ç®¡ç†

æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼š`logs\wx_channel.log`

- æ—¥å¿—ä¼šè‡ªåŠ¨è½®è½¬ï¼Œè¶…è¿‡10MBä¼šåˆ›å»ºæ–°æ–‡ä»¶
- ä¿ç•™æœ€è¿‘5ä¸ªæ—¥å¿—æ–‡ä»¶
- å¯ä»¥æ‰‹åŠ¨å¤‡ä»½æˆ–æ¸…ç†æ—§æ—¥å¿—

---

## ðŸ“Œ æç¤º

1. å®žæ—¶æŸ¥çœ‹æ—¥å¿—æ—¶ï¼ŒæŒ‰ `Ctrl+C` é€€å‡º
2. æœç´¢æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼
3. æ—¥å¿—æ–‡ä»¶ä½¿ç”¨UTF-8ç¼–ç 
4. å»ºè®®å®šæœŸæŸ¥çœ‹æ—¥å¿—ï¼ŒåŠæ—¶å‘çŽ°é—®é¢˜
5. å¯ä»¥å°†æ—¥å¿—åˆ†æžç»“æžœä¿å­˜ä¸ºæŠ¥å‘Šï¼š`.\scripts\analyze_logs.ps1 > report.txt`
